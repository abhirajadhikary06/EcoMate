{% extends 'base.html' %}

{% block content %}
<h1>ShopNow</h1>
<p>Your Points: {{ user_points }}</p>

<div>
    {% for item in shop_items %}
    <div style="border: 1px solid #ccc; padding: 10px; margin: 10px;">
        <h3>{{ item.name }}</h3>
        <p>{{ item.description }}</p>
        <p>Points Required: {{ item.points_required }}</p>
        <form action="{% url 'purchase_item' item.id %}" method="post">
            {% csrf_token %}
            <button type="submit" {% if user_points < item.points_required %}disabled{% endif %}>
                {% if user_points < item.points_required %}
                    Not Enough Points
                {% else %}
                    Purchase
                {% endif %}
            </button>
        </form>
    </div>
    {% endfor %}
</div>
{% endblock %}